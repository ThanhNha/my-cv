- pipeline: "Test Deploy action"
  events:
  - type: "PUSH"
    refs:
    - "refs/heads/main"
  fail_on_prepare_env_warning: true
  trigger_conditions:
  - trigger_condition: "SUCCESS_PIPELINE"
    trigger_project_name: "my-cv"
    trigger_pipeline_name: "Test Deploy action"
  actions:
  - action: "npm run dist"
    type: "BUILD"
    docker_image_name: "library/node"
    docker_image_tag: "18.17.0"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - ""
    shell: "BASH"
  - action: "Transfer to 82.180.152.249"
    type: "SFTP"
    local_path: "/"
    remote_path: "/home/u796998893/home/u796998893/domains/theshin.online/public_html/shin"
    login: "u796998893"
    password: "secure!hgvHG+Tpq9Di3ZTPnubyHQ==.xJWKiheE/t1DOhEh1Bm59Q=="
    host: "82.180.152.249"
    port: "65002"
  - action: "Send notification to Telegram Channel"
    type: "TELEGRAM"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME run by [$BUDDY_TRIGGERING_ACTOR]($BUDDY_TRIGGERING_ACTOR_URL)"
    integration: "7EKz9qJ38bj9xe3AORZm2PQ4A1"
    trigger_conditions:
    - trigger_condition: "ACTION_STATUS_IS"
      trigger_status: "SUCCESSFUL"
      trigger_action_name: "Transfer to 82.180.152.249"
